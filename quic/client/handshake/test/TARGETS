# @autodeps

load("@fbcode_macros//build_defs:cpp_library.bzl", "cpp_library")
load("@fbcode_macros//build_defs:cpp_unittest.bzl", "cpp_unittest")

cpp_unittest(
    name = "ClientHandshakeTest",
    srcs = [
        "ClientHandshakeTest.cpp",
    ],
    deps = [
        ":mock_psk_cache",
        "//fizz/crypto/test:TestUtil",
        "//fizz/protocol/test:mocks",
        "//fizz/server:protocol",
        "//fizz/server/test:mocks",
        "//folly/io/async:scoped_event_base_thread",
        "//folly/io/async:ssl_context",
        "//folly/io/async/test:mocks",
        "//folly/ssl:init",
        "//quic/client/handshake:client_handshake",
        "//quic/common/test:test_utils",
        "//quic/state:state_machine",
        "//quic/state:stream_functions",
    ],
    external_deps = [
        ("googletest", None, "gmock"),
    ],
)

cpp_unittest(
    name = "ClientTransportParametersTest",
    srcs = [
        "ClientTransportParametersTest.cpp",
    ],
    deps = [
        "//fizz/protocol/test:test_messages",
        "//quic/client/handshake:client_extension",
        "//quic/common/test:test_utils",
    ],
)

cpp_library(
    name = "mock_psk_cache",
    headers = [
        "MockQuicPskCache.h",
    ],
    deps = [
        "//folly:optional",
        "//folly/portability:gmock",
        "//quic/client/handshake:psk_cache",
    ],
)
